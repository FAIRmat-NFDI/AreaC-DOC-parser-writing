
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="NOMAD documentation on how to write and extend parsers.
">
      
      
        <meta name="author" content="FAIRmat consortium">
      
      
      
      
        <link rel="next" href="parser_shell/">
      
      <link rel="icon" href="assets/favicon.png">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-9.1.21">
    
    
      
        <title>NOMAD Parser Writing Documentation</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.eebd395e.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Titillium Web";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="stylesheets/extra.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="#2A4CDF" data-md-color-accent="#008A67">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#how-to-write-a-parser" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="NOMAD Parser Writing Documentation" class="md-header__button md-logo" aria-label="NOMAD Parser Writing Documentation" data-md-component="logo">
      
  <img src="assets/nomad-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            NOMAD Parser Writing Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Overview
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="NOMAD Parser Writing Documentation" class="md-nav__button md-logo" aria-label="NOMAD Parser Writing Documentation" data-md-component="logo">
      
  <img src="assets/nomad-logo.png" alt="logo">

    </a>
    NOMAD Parser Writing Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Overview
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        Overview
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    Getting started
  </a>
  
    <nav class="md-nav" aria-label="Getting started">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parser-organization" class="md-nav__link">
    Parser organization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-up-your-development-branches" class="md-nav__link">
    Setting up your development branches
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="parser_shell/" class="md-nav__link">
        Creating the shell for your parser
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="computational/" class="md-nav__link">
        Parser structure for computation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="parser_tests/" class="md-nav__link">
        Creating parser tests
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="creating_new_metainfo/" class="md-nav__link">
        Creating new metainfo
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          References
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          References
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="references/quick_parser_setup/" class="md-nav__link">
        Quick Start - parser setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="references/quick_installing_nomad_dev/" class="md-nav__link">
        Quick Start - installing a development version of NOMAD
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="references/quick_NOMAD_best_practices/" class="md-nav__link">
        Quick Start - best practices for NOMAD development
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="references/examples_parser_matching/" class="md-nav__link">
        Examples - NOMAD's parser-matching interface
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="references/examples_populating_archive/" class="md-nav__link">
        Examples - populating the NOMAD archive
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="references/standard_workflows/" class="md-nav__link">
        Standard workflows in NOMAD
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="references/advanced_new_parser_project/" class="md-nav__link">
        Advanced - creating a new parser project
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="references/old_docs/" class="md-nav__link">
        Old Docs
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    Getting started
  </a>
  
    <nav class="md-nav" aria-label="Getting started">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parser-organization" class="md-nav__link">
    Parser organization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-up-your-development-branches" class="md-nav__link">
    Setting up your development branches
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="how-to-write-a-parser">How to write a parser<a class="headerlink" href="#how-to-write-a-parser" title="Permanent link">&para;</a></h1>
<p>NOMAD uses parsers to convert raw data (for example, output from computational software, instruments,
or electronic lab notebooks) into NOMAD's common Archive format. The following pages describe
how to develop such a parser and integrate it within the NOMAD software. The goal is equip users
with the required knowledge to contribute to and extend NOMAD.</p>
<h2 id="getting-started">Getting started<a class="headerlink" href="#getting-started" title="Permanent link">&para;</a></h2>
<p>In principle, it is possible to <a href="references/quick_parser_setup/">develop a "local parser"</a> that uses the <em>nomad-lab</em> package to parse raw data,
without changing the NOMAD software itself. This allows a quick start for focusing on the parsing
of the data itself, but is not relevant for full integration of your new parser into NOMAD.
Here we are focused on developing parsers that will be integrated into the NOMAD software.
For this, you will have to <a href="references/installing_nomad_dev.md">install a development version of NOMAD</a>.</p>
<h3 id="parser-organization">Parser organization<a class="headerlink" href="#parser-organization" title="Permanent link">&para;</a></h3>
<p>The NOMAD parsers can be found within your local NOMAD git repo under
<code>dependencies/parsers/</code>. The parsers are organized into the following individual projects
(<code>dependencies/parsers/&lt;parserproject&gt;</code>) with their own corresponding repositories:</p>
<ul>
<li><a href="https://github.com/nomad-coe/atomistic-parsers">atomistic</a> - Parsers for output from classical molecular simulations, e.g., from Gromacs, Lammps, etc.</li>
<li><a href="https://github.com/nomad-coe/database-parsers">database</a> - Parsers for various databases, e.g., OpenKim.</li>
<li><a href="https://github.com/nomad-coe/nomad-parser-eelsdb">eelsdb</a> - Parser for the EELS database (https://eelsdb.eu/; to be integrated in the database project).</li>
<li><a href="https://github.com/nomad-coe/electronic-parsers">electronic</a> - Parsers for output from electronic structure calculations, e.g., from Vasp, Fhiaims, etc.</li>
<li><a href="https://github.com/nomad-coe/nomad-parser-nexus">nexus</a> - Parsers for combining various instrument output formats and electronic lab notebooks.</li>
<li><a href="https://github.com/nomad-coe/workflow-parsers">workflow</a> - Parsers for output from codes that specialize in workflows, e.g., Aflow, FHI-vibes, QuantumEspressoPhonon, etc.</li>
</ul>
<p>Within each project folder you will find a <code>test/</code> directory, containing the <a href="parser_tests/">parser tests</a>, and also a directory containing the parsers' source code,
<code>&lt;parserproject&gt;parser</code> or <code>&lt;parserproject&gt;parsers</code>, depending on if one or more
parsers are contained within the project, respectively. In the case of multiple parsers, the files
for individual parsers are contained within a corresponding subdirectory: <code>&lt;parserproject&gt;parsers/&lt;parsername&gt;</code>
For example, the Quantum Espresso parser files are found in <code>dependencies/parsers/electronic/electronicparsers/quantumespresso/</code>.</p>
<h3 id="setting-up-your-development-branches">Setting up your development branches<a class="headerlink" href="#setting-up-your-development-branches" title="Permanent link">&para;</a></h3>
<p>We will first focus on the case of adding a new parser to an existing parser project.
<a href="new_parser_project.md">Creating a new parser project</a> will require a few extra steps.
The existing parser projects are stored within their own git repositories and then linked
to the NOMAD software. All current parser projects are available at <a href="https://github.com/nomad-coe">nomad-coe</a>
(see also individual links above).</p>
<p>You will first need to create new branches within <em>both</em> the NOMAD project and <em>also</em> within the corresponding
parser project. Ideally, this should be done following the <a href="references/quick_NOMAD_best_practices/">best practices for NOMAD development</a>.
Here, we briefly outline the procedure:</p>
<p>Create a new issue within the NOMAD project at <a href="https://gitlab.mpcdf.mpg.de/nomad-lab/nomad-FAIR.git">NOMAD gitlab</a>.
On the page of the new issue, in the top right, click the arrow next to the <code>Create merge request</code>
button and select <code>Create branch</code>. The branch name should be automatically generated with the
corresponding issue number and the title of the issue (copy the branch name to the clipboard for use below),
and the default source branch should be <code>develop</code>.
Click the <code>Create branch</code> button.</p>
<p>Now, run the following commands in your local NOMAD directory:</p>
<p><code>git fetch --all</code> &nbsp;&nbsp;&nbsp;&nbsp; (to sync with remote)</p>
<p><code>git checkout origin/&lt;new_branch_name&gt; -b &lt;new_branch_name&gt;</code> &nbsp;&nbsp;&nbsp;&nbsp; (to checkout the new branch and create a local copy of the branch)</p>
<p>Unless you <em>just</em> installed the NOMAD development version, you should rerun <code>./scripts/setup_dev_env.sh</code>
within the NOMAD directory to reinstall with the newest development branch.</p>
<p>Now we need to repeat this process for the parser project that we plan to extend. As above,
create a new issue at the relevant parser project GitHub page. Using the identical
issue title as you did for the NOMAD project above is ideal for clarity.
On the page of the new issue, in the right sidebar under the subsection <code>Development</code>, click
<code>Create a branch</code>. As above, the branch name should be automatically generated with the
corresponding issue number and the title of the issue, and the default source branch should be <code>develop</code>
(which can be seen by clicking <code>change source branch</code>).
Under <code>What's next</code>, the default option should be <code>Checkout locally</code>, which is what we want in this case.
Click <code>Create branch</code>, and then copy the provided commands to the clipboard, and run them within the parser
project folder within your local NOMAD repo, i.e., <code>dependencies/parsers/&lt;parserproject&gt;</code>.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": ".", "features": ["navigation.instant"], "search": "assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.220ee61c.min.js"></script>
      
    
  </body>
</html>